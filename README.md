# Телеграм бот - счетчик калорий

Телеграм бот для подсчёта калорий и отслеживания питания. Позволяет пользователю зарегистрироваться, рассчитать норму и вести дневник приёмов пищи. Бот находится в разработке, его функционал постепенно расширяется.

---

## Основные возможности

*   Регистрация пользователя с указанием антропометрических данных (рост, вес, возраст) и цели (похудеть/набрать массу).
*   Расчёт рекомендуемой суточной нормы калорий на основе введённых данных.
*   Внесение и суммирование данных о приёмах пищи за текущий день.
*   Просмотр статистики (суммарные калории и БЖУ) за сегодня и за последние 7 дней.
*   Базовое взаимодействие с Google Gemini API (функционал в процессе разработки).

---

## Технологический стек

*   **Язык:** Python 3.13
*   **Фреймворк:** Aiogram 3.x (асинхронный)
*   **База данных:** SQLite (с асинхронной библиотекой `aiosqlite`)
*   **Валидация данных:** Pydantic 2
*   **Внешние API:** Google Gemini API
*   **Менеджер зависимостей:** `uv`
*   **Конфигурация:** Переменные окружения (`python-dotenv`)

---

## Установка и запуск бота

1.  **Клонирование репозитория**
    ```bash
    git clone https://github.com/Shm3kvud/calorie-counter-bot.git
    cd calorie-counter-bot
    ```

2.  **Настройка переменных окружения**
    Переименуйте файл `.env.example` в `.env` и откройте его для редактирования:
    ```bash
    cp .env.example .env
    ```
    Теперь откройте файл .env в любом текстовом редакторе.
    Внутри файла `.env` укажите ваши секретные ключи:
    ```env
    # Обязательный токен от @BotFather
    BOT_TOKEN=ваш_токен_бота
    # Ключ для доступа к Gemini API
    GEMINI_API_KEY=ваш_ключ_gemini
    ```
    **Важно:** Файл `.env` уже добавлен в `.gitignore` и не попадёт в репозиторий.

### Способ 1: Установка зависимостей через `pip` (стандартный подход)

3. **Создание и активация виртуального окружения**
   Рекомендуется для изоляции зависимостей проекта.
    ```bash
    python -m venv .venv
    ```
    **Активация виртуального окружения**
    *   **Linux/macOS:** `source .venv/bin/activate`
    *   **Windows (PowerShell):** `.venv\Scripts\activate`
    

4. **Установка зависимостей**
    ```bash
    pip install -r requirements.txt
    ```

5. **Запуск бота**
    ```bash
    python main.py
    ```

### Способ 2: Установка зависимостей через `uv` (быстрый и современный подход)
    
*[Инструкция по установке `uv`](https://docs.astral.sh/uv/getting-started/installation/)*

3. **Установка зависимостей**
    Команда `sync` создаст виртуальное окружение (если его нет) и установит все пакеты, указанные в `pyproject.toml`.
    ```bash
    uv sync
    ```

4. **Активация виртуального окружения**
    *   **Linux/macOS:** `source .venv/bin/activate`
    *   **Windows (PowerShell):** `.venv\Scripts\activate`
    *(Примечание: для запуска можно использовать `uv run python main.py`, тогда явная активация не требуется).*

5. **Запуск бота**
    ```bash
    python main.py
    ```

---

## Структура проекта
```txt
.
├── app/                # Корневая директория приложения
│   ├── configs/        # Конфигурация приложения (загрузка переменных окружения)
│   ├── database/       # Модуль для работы с базой данных (SQLite)
│   ├── formatters/     # Утилиты для форматирования данных (текст, числа)
│   ├── gemini_api/     # Логика для взаимодействия с Google Gemini API
│   ├── handlers/       # Хендлеры бота
│   ├── keyboards/      # Клавиатуры бота
│   ├── middlewares/    # Middlewares для предварительной обработки события
│   ├── states/         # Состояния (FSM) для общения с пользователем
│   ├── texts/          # Большие текстовые сообщения бота
│   └── validators/     # Валидаторы данных на основе Pydantic
├── data/               # Директория для хранения самого .sqlite3 файла
├── .dockerignore       # .dockerignore файл
├── .env.example        # Пример файла с переменными окружения
├── .gitignore          # .gitignore файл
├── .python-version     # Версия Python
├── Dockerfile          # Докерфайл
├── main.py             # Точка входа (основной файл запуска бота)
├── pyproject.toml      # Конфигурация проекта и зависимости (используется uv)
├── README.md           # Документация проекта (этот файл)
├── requirements.txt    # Список зависимостей в классическом формате (для pip)
└── uv.lock             # Файл с фиксированными версиями зависимостей (генерируется uv)
```

---